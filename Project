CREATE TABLE "KYC_ID_XREF"
(
    "KYC_XREF_ID" VARCHAR2(36) NOT NULL ENABLE,
    "KYCID" VARCHAR2(36) NOT NULL ENABLE,
    "CORE_COMPONENT_STATE" VARCHAR2(30) NOT NULL ENABLE,
    "ID_TYPE" VARCHAR2(20) NOT NULL ENABLE,
    "ID" VARCHAR2(30) NOT NULL ENABLE,
    "SYSTEM" VARCHAR2(50),
    "CNTRY_CODE" VARCHAR2(2),
    "LEGAL_VEHICLE" VARCHAR2(100),
    "CLIENT" VARCHAR2(100),
    "IS_PRIMARY" CHAR(1),
    "DATA_SOURCE" VARCHAR2(25),
    "CREATE_ID" VARCHAR2(25) NOT NULL ENABLE,
    "CREATE_DT" DATE NOT NULL ENABLE,
    "LST_UPD_ID" VARCHAR2(25),
    "LST_UPD_DT" DATE,
    "VER_NUM" NUMBER DEFAULT 0 NOT NULL ENABLE NOVALIDATE,
    "ACT_STRT_DT" DATE,
    "ACT_END_DT" DATE,
    "KYC_SHARD_NUM" NUMBER,
    "LST_UPD_TIME" NUMBER DEFAULT 0,
    SUPPLEMENTAL LOG GROUP "GGS_63007" ("KYC_XREF_ID", "KYCID", "CORE_COMPONENT_STATE") ALWAYS,
    SUPPLEMENTAL LOG GROUP "GGS_26210" ("KYC_XREF_ID", "KYCID", "CORE_COMPONENT_STATE") ALWAYS
)
SEGMENT CREATION IMMEDIATE
PCTFREE 10 PCTUSED 10 INITRANS 1 MAXTRANS 255
NOCOMPRESS NOLOGGING
STORAGE (INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
         PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1)
BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT;

-- Primary Key Index
CREATE UNIQUE INDEX "KYC_ID_XREF_PK" ON "KYC_ID_XREF"
    ("KYC_XREF_ID", "KYCID", "CORE_COMPONENT_STATE")
PCTFREE 10 INITRANS 2 MAXTRANS 255
COMPUTE STATISTICS COMPRESS ADVANCED LOW
STORAGE (INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
    PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1)
BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT;

-- Apply Primary Key Constraint
ALTER TABLE "KYC_ID_XREF"
ADD CONSTRAINT "KYC_ID_XREF_PK" PRIMARY KEY ("KYC_XREF_ID", "KYCID", "CORE_COMPONENT_STATE")
USING INDEX "KYC_ID_XREF_PK" ENABLE;

-- Other Indexes
CREATE INDEX "KYCIDXREFIDX" ON "KYC_ID_XREF" ("IS_PRIMARY");
CREATE INDEX "XREFKYCIDXCOREIDX" ON "KYC_ID_XREF" ("KYCID", "IS_PRIMARY", "ID", "CORE_COMPONENT_STATE");
CREATE INDEX "KYC_ID_XREF_IDX1" ON "KYC_ID_XREF" ("ID_TYPE", "ID");
CREATE INDEX "XREF_IDX" ON "KYC_ID_XREF" ("KYCID", "CORE_COMPONENT_STATE");
CREATE INDEX "KYC_ID_XREF_IDX001" ON "KYC_ID_XREF" ("ID_TYPE", "IS_PRIMARY", "ID");
CREATE INDEX "IDX1_XREFKYC1" ON "KYC_ID_XREF" ("KYCID", "CORE_COMPONENT_STATE", "IS_PRIMARY", "ID_TYPE", "ID");
CREATE INDEX "IDX_LST_DTYC_ID_XREF" ON "KYC_ID_XREF" ("LST_UPD_DT");
ALTER TABLE "KYC_ID_XREF"
ADD CONSTRAINT "KYC_ID_XREF_KYC_MAIN_FK"
FOREIGN KEY ("KYCID", "CORE_COMPONENT_STATE")
REFERENCES "KYC_MAIN" ("KYCID", "CORE_COMPONENT_STATE")
ENABLE;

